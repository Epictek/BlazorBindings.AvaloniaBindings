@using System.Collections.ObjectModel;

<ContentControl Tag="@("ListView")">
    @* <ToolbarItems>
        <ToolbarItem Text="Add" OnClick="AddItem" />
    </ToolbarItems> *@

    <ChildContent>

        <ListBox ItemsSource="items" SelectionMode="AC.SelectionMode.Single">
            <ItemTemplate>
                <StackPanel>
                    <TextBlock Text="@context.Name"></TextBlock>
                    <TextBlock Text="@context.Type"></TextBlock>
                    <Image Source="ImageHelper.LoadFromResource(context.ImageUrl)">
                        <ContextMenuSlot>
                            <ContextMenu T="object">
                                <MenuItem T="object" Header="@("Remove")" OnClick="() => RemoveItem(context)" />
                            </ContextMenu>
                        </ContextMenuSlot>
                    </Image>
                </StackPanel>
                @* <Image Text="@context.Name" Detail="@context.Type" ImageSource="@context.ImageUrl">
                    <ContextActions>
                        <MenuItem Text="Remove" IsDestructive="true" OnClick="() => RemoveItem(context)" />
                    </ContextActions>
                </Image> *@
            </ItemTemplate>
        </ListBox>

    </ChildContent>
</ContentControl>

@code {
    ObservableCollection<Weapon> items = new(Weapons.Items);

    int itemIndex;
    void AddItem()
    {
        items.Add(new Weapon($"Mega gun {itemIndex++}", "Custom", null));
    }

    void RemoveItem(Weapon item)
    {
        items.Remove(item);
    }
}
