@page "/carouselviewplayground"

<ContentControl Tag="@("CarouselView")">
    <Grid RowDefinitions="@(new("*,Auto"))">

        <Carousel Grid.Row="0"
            ItemsSource="items"
            @bind-SelectedItem="currentItem"
            @bind-SelectedIndex="currentPosition"
            >
            <ItemTemplate>
                <StackPanel>
                    <Label HorizontalAlignment="HorizontalAlignment.Center">@context.Name</Label>
                    <Image Source="ImageHelper.LoadFromResource(context.Image)" />
                </StackPanel>
            </ItemTemplate>
        </Carousel>

        <StackPanel Grid.Row="1">
            @* <IndicatorView @ref="indicatorView" HorizontalOptions="LayoutOptions.Center"
                           IndicatorColor="Colors.DarkGray"
                           SelectedIndicatorColor="Colors.LightGray" /> *@

            <Label>Current item: @currentItem?.Name</Label>
            <Label>Current position: @currentPosition</Label>
            <Button OnClick="() => currentPosition = 3">Set last position</Button>
            <Button OnClick="() => currentItem = items[2]">Set item to Bruce</Button>
        </StackPanel>
    </Grid>
</ContentControl>

@code {
    Item[] items = 
    [
        new("Nemo", "https://static.wikia.nocookie.net/pixar/images/a/aa/Nemo-FN.png/revision/latest/smart/width/250/height/250?cb=20160710221104"),
        new("Dory", "https://static.wikia.nocookie.net/pixar/images/1/1f/Dory-white.jpg/revision/latest/scale-to-width-down/350?cb=20110924203518"),
        new("Bruce", "https://static.wikia.nocookie.net/pixar/images/e/e3/Bruce-render.png/revision/latest/scale-to-width-down/350?cb=20181210152244"),
        new("Gill", "https://static.wikia.nocookie.net/pixar/images/7/72/Gill.png/revision/latest/scale-to-width-down/350?cb=20210322233843")
    ];

    // IndicatorView indicatorView;
    Item currentItem;
    int currentPosition;

    record Item(string Name, string Image);
}
